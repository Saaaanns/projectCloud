<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title>Drivers</title>
</head>
<body>
    <%- include("partials/nav") %>
    <section class="main-content">
        <form action="/drivers" method="GET">
            <input type="text" name="search" value="<%= searchQuery %>" placeholder="Search by name">
            <button type="submit">Search</button>
        </form>

        <table>
            <thead>
                <tr>
                    <th>
                        <a href="/drivers?sortField=name&sortDirection=<%= sortField === 'name' && sortDirection === 'asc' ? 'desc' : 'asc' %>">
                            Name <%= sortField === 'name' ? (sortDirection === 'asc' ? '🔼' : '🔽') : '' %>
                        </a>
                    </th>
                    <th>
                        <a href="/drivers?sortField=age&sortDirection=<%= sortField === 'age' && sortDirection === 'asc' ? 'desc' : 'asc' %>">
                            Age <%= sortField === 'age' ? (sortDirection === 'asc' ? '🔼' : '🔽') : '' %>
                        </a>
                    </th>
                    <th>
                        <a href="/drivers?sortField=category&sortDirection=<%= sortField === 'category' && sortDirection === 'asc' ? 'desc' : 'asc' %>">
                            Category <%= sortField === 'category' ? (sortDirection === 'asc' ? '🔼' : '🔽') : '' %>
                        </a>
                    </th>
                    <th>Active</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% drivers.forEach(driver => { %>
                    <tr>
                        <td>
                            <img src="<%= driver.image %>" alt="<%= driver.name %>">
                            <%= driver.name %>
                        </td>
                        <td><%= driver.birthdate %></td>
                        <td><%= driver.category %></td>
                        <td class="status <%= driver.active ? 'active' : 'inactive' %>">
                            <%= driver.active ? '●' : '○' %>
                        </td>
                        <td>
                            <a href="/drivers/<%= driver.id %>" class="view-link">View</a>
                            |
                            <a href="/drivers/<%= driver.id %>/update" class="edit-link">Edit</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </section>
</body>
</html>
